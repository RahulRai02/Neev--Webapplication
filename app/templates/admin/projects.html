{% extends 'layout.html'%}
{% block content %}
<div class="container">
  
    <h1>Projects</h1>
    <div class="container" style="width:60%">
        <form name="searchForm" >
          <div class="d-flex flex-wrap m-1 justify-content-between">
            <input type="hidden" name="signal" value="search">
          <div class="form-group">
            <label for=" event_name" >Event name:</label>
            <input type="text" class="form-control" id="event_name" name="event_name">
          </div>
          <div class="form-group">
            <label for="date">Start date</label>
            <input type="date" class="form-control" id="date" name="date">
          </div>
          <div class="form-group">
            <label for="budget">Budget</label>
            <input type="number" class="form-control" id="budget" name="budget">
          </div>

          <div class="form-group">
            <label for="participants">Number of participants</label>
            <input type="number" class="form-control" id="participants" name="participants">
          </div>
         
          <div class="form-group">
            <label for="duration">Duration (in hours)</label>
            <input type="number" class="form-control" id="duration" name="duration">

          </div>

          <div class="form-group">
            <label for="collection">Collection (in ₹)</label>
            <input type="number" class="form-control" id="collection" name="collection">

          </div>

          <div class="form-group">
            <label for="expense">Total expense:</label>
            <input type="number" class="form-control" id="expense" name="expense">
          </div>
          
          <div class="form-group">
            <label for="venue_id" >Venue ID</label>
            <input type="text" class="form-control" id="venue_id" name="venue_id">
          </div>

          <div class="form-group">
            <label for="aadhar">Beneficiary Aadhar Id</label>
            <input type="number" class="form-control" id="email" name="aadhar" min="100000000000" max="999999999999" required>
          </div>

          <div class="form-group">
            <label for="volunteer_email_id">Volunteer email id</label>
            <input type="text" class="form-control" id="volunteer_email_id" name="volunteer_email_id" required>
          </div>

          <div class="form-group">
            <label for="donor_email_id">Donor email id</label>
            <input type="text" class="form-control" id="donor_email_id" name="donor_email_id" required>
          </div>

          <div class="form-group">
            <label for="trainer_email_id">Trainer email id</label>
            <input type="text" class="form-control" id="trainer_email_id" name="trainer_email_id" required>
          </div>

          <div class="form-group">
            <label for="EmployID">Employee Id</label>
            <input type="number" class="form-control" id="email" name="EmployID" min="100000000000" max="999999999999" required>
          </div>
          <div >
            <button type="submit"  class="btn btn-primary" onclick="" value="">Search</button>
          </div>
          
          
        </form>
        
      </div>
      
      
       <div class="container">
        <button type="button" class="btn btn-success m-2" data-toggle="modal" data-target="#addModal" onclick="">Add New Project</button>

       </div>

   <table class="table">
    
     <thead>
    <tr>
      <th scope="col">Event name </th>
      <th scope="col">Start date</th>
      <th scope="col">Budget </th>
      <th scope="col">No. of participants </th>
      <th scope="col">Duration</th>
      <th scope="col">Collection</th>
      <th scope="col">Expenses</th>
      <th scope="col">Actions</th>
    </tr>
  </thead>
  <!-- dummy data -->
  <tbody>
    {%for user in userDetails%}
    <tr>
      <th scope="row" headers="event_name">{{user[0]}}</th>
      <td  headers="date">{{user[1]}}</td>
      <td  headers="budget">{{user[3]}}</td>
      <td headers="participants">{{user[4]}}</td>
      <td headers="duration">{{user[5]}}</td>
      <td headers="collection">{{user[6]}}</td>
      <td headers="expense">{{user[7]}}</td>
      <td>
        <!-- <button type="button" class="btn btn-primary btn-sm" data-toggle="modal" data-target="#editModal" onclick="edit(this)">Edit</button> -->
        <button type="button" class="btn btn-primary btn-sm" data-toggle="modal" data-target="#editModal" onclick="edit(this)">Edit
        </button>
        <button type="button" class="btn btn-danger btn-sm" data-toggle="modal" data-target="#deleteModal" onclick="delete_user(this)">Delete</button>
        <button type="button" class="btn btn-success btn-sm" data-toggle="modal" data-target="#profileModal">Details</button>
      </td>
    </tr>
    {%endfor%}
  </tbody>
</table>


<!-- edit modal  -->
<div class="modal fade" id="editModal" tabindex="-1" role="dialog" aria-labelledby="editModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="editModalLabel">Edit Project</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <form name="editedDetails" method="POST">
            <input type="hidden"  value="editProject" name="signal">
            <div class="form-group">
              <label for=" event_name" >Event name:</label>
              <input type="text" class="form-control" id="event_name" name="event_name" readonly>
            </div>
            <div class="form-group">
              <label for="date">Start date</label>
              <input type="date" class="form-control" id="date" name="date" readonly />
            </div>
            <div class="form-group">
              <label for="budget">Budget</label>
              <input type="number" class="form-control" id="budget" name="budget">
            </div>
  
            <div class="form-group">
              <label for="participants">Number of participants</label>
              <input type="number" class="form-control" id="participants" name="participants">
            </div>
           
            <div class="form-group">
              <label for="duration">Duration (in hours)</label>
              <input type="number" class="form-control" id="duration" name="duration">
  
            </div>
  
            <div class="form-group">
              <label for="collection">Collection (in ₹)</label>
              <input type="number" class="form-control" id="collection" name="collection">
  
            </div>
  
            <div class="form-group">
              <label for="expense">Total expense:</label>
              <input type="number" class="form-control" id="expense" name="expense">
            </div>
            
            <div class="form-group">
              <label for="venue_id" >Venue ID</label>
              <input type="text" class="form-control" id="venue_id" name="venue_id">
            </div>
  
            <div class="form-group">
              <label for="aadhar">Beneficiary Aadhar Id</label>
              <input type="number" class="form-control" id="email" name="aadhar" min="100000000000" max="999999999999" required>
            </div>
  
            <div class="form-group">
              <label for="volunteer_email_id">Volunteer email id</label>
              <input type="text" class="form-control" id="volunteer_email_id" name="volunteer_email_id" required>
            </div>
  
            <div class="form-group">
              <label for="donor_email_id">Donor email id</label>
              <input type="text" class="form-control" id="donor_email_id" name="donor_email_id" required>
            </div>

            <div class="form-group">
                <label for="types">Types</label>
                <input type="text" class="form-control" id="types" name="types" required>
            </div>

            <div class="form-group">
              <label for="trainer_email_id">Trainer email id</label>
              <input type="text" class="form-control" id="trainer_email_id" name="trainer_email_id" required>
            </div>
  
            <div class="form-group">
              <label for="EmployID">Employee Id</label>
              <input type="number" class="form-control" id="email" name="EmployID" min="100000000000" max="999999999999" required>
            </div>
              
              <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                <input type="submit" class="btn btn-primary" id="saveChangesButton" value="Save Changes">
              </div>
          </form>
        </div>
       
      </div>
    </div>
  </div>


<!-- add modal -->

<div class="modal fade" id="addModal" tabindex="-1" role="dialog" aria-labelledby="editModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="editModalLabel">Add New Project</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <form name="addDetails" method="POST">
          <!-- <input type="hidden" name="search" value="addProject"> -->
          <input type="hidden"  value="addProject" name="signal">
          <div class="form-group">
            <label for=" event_name" >Event name:</label>
            <input type="text" class="form-control" id="event_name" name="event_name"/>
          </div>
          <div class="form-group">
            <label for="date">Start date</label>
            <input type="date" class="form-control" id="date" name="date">
          </div>
          <div class="form-group">
            <label for="budget">Budget</label>
            <input type="number" class="form-control" id="budget" name="budget">
          </div>

          <div class="form-group">
            <label for="participants">Number of participants</label>
            <input type="number" class="form-control" id="participants" name="participants">
          </div>
         
          <div class="form-group">
            <label for="duration">Duration (in hours)</label>
            <input type="number" class="form-control" id="duration" name="duration">

          </div>

          <div class="form-group">
            <label for="collection">Collection (in ₹)</label>
            <input type="number" class="form-control" id="collection" name="collection">

          </div>

          <div class="form-group">
            <label for="expense">Total expense:</label>
            <input type="number" class="form-control" id="expense" name="expense">
          </div>
          
          <div class="form-group">
            <label for="venue_id" >Venue ID</label>
            <input type="text" class="form-control" id="venue_id" name="venue_id">
          </div>

          <div class="form-group">
            <label for="aadhar">Beneficiary Aadhar Id</label>
            <input type="number" class="form-control" id="email" name="aadhar" min="100000000000" max="999999999999" required>
          </div>

          <div class="form-group">
            <label for="volunteer_email_id">Volunteer email id</label>
            <input type="text" class="form-control" id="volunteer_email_id" name="volunteer_email_id" required>
          </div>

          <div class="form-group">
            <label for="donor_email_id">Donor email id</label>
            <input type="text" class="form-control" id="donor_email_id" name="donor_email_id" required>
          </div>

          <div class="form-group">
            <label for="types">Types</label>
            <input type="text" class="form-control" id="types" name="types" required>
          </div>

          <div class="form-group">
            <label for="trainer_email_id">Trainer email id</label>
            <input type="text" class="form-control" id="trainer_email_id" name="trainer_email_id" required>
          </div>

          <div class="form-group">
            <label for="EmployID">Employee Id</label>
            <input type="number" class="form-control" id="email" name="EmployID" min="100000000000" max="999999999999" required>
          </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
              <input type="submit" class="btn btn-primary" id="saveChangesButton" value="Add Project">
            </div>
            
        </form>
      </div>
     
    </div>
  </div>
</div>



<!-- delete modal  -->

<div class="modal fade" id="deleteModal" tabindex="-1" role="dialog" aria-labelledby="deleteModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="deleteModalLabel">Delete project</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          Are you sure you want to delete this project?
        </div>
        <div class="modal-footer">
            <form name="deleteForm" method="POST">
                <div class="form-group">
                    <input type="hidden" name="signal" value="delete">
                    <label for="event_name">Event Name</label>
                    <input type="text" class="form-control" id="event_name" name="event_name" readonly>
                    <label for="date">Start_date</label>
                    <input type="text" class="form-control" id="date" name="date" readonly>
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                    <button type="submit" class="btn btn-danger" id="deleteButton">Delete</button>
                </div>
            </form>
        </div>
    </div>
  </div>
  
<!-- profile modal -->

  <div class="modal fade" id="profileModal" tabindex="-1" role="dialog" aria-labelledby="profileModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="profileModalLabel">Project details</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          
          <div class="row">
         
            <div class="col-md-8">
              <h3>Project 1</h3>
              <p>Start date: 18-03-2023</p>
              <p>Budget (in ₹): 1000000</p>
              <p>Number of participants: 70</p>
              <p>Duration (in hours): 50</p>
              <p>Collection (in ₹): 500000</p>
              <p>Expenses (in ₹): 300000</p>
              <p>Venue ID: 2563527644</p>
              <h4>Participants</h4>
              <table class="table">
                <thead>
                  <tr>
                    <th scope="col">Sr: No</th>
                    
                    <th scope="col">Aadhar ID</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <th scope="row">1</th>
                    
                    <td>875493863494</td>
                  </tr>
                  
                </tbody>
              </table>
              <h4>Volunteers</h4>
              <table class="table">
                <thead>
                  <tr>
                    <th scope="col">Sr: No</th>
                    
                    <th scope="col">Email ID</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <th scope="row">1</th>
                    
                    <td>captain.avengers@gmail.com</td>
                  </tr>
                  
                </tbody>
              </table>            
              <h4>Donors</h4>
              <table class="table">
                <thead>
                  <tr>
                    <th scope="col">Sr: No</th>
                    
                    <th scope="col">Donor email ID</th>
                    <th scope="col"> Amount (in ₹)</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <th scope="row">1</th>
                    
                    <td>ironman.avengers@gmail.com</td>
                    <td>1000000</td>
                  </tr>
                  
                </tbody>
              </table>
              
            </table>
            <h4>Trainers</h4>
            <table class="table">
              <thead>
                <tr>
                  <th scope="col">Sr: No</th>
                  
                  <th scope="col">Email ID</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <th scope="row">1</th>
                  
                  <td>doctor.strange@gmail.com</td>
                </tr>
              </tbody>
            </table> 
            
          </table>
          <h4>Employees involved</h4>
          <table class="table">
            <thead>
              <tr>
                <th scope="col">Sr: No</th>
                
                <th scope="col">Employee ID</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <th scope="row">1</th>
                
                <td>766773347</td>
              </tr>
              
            </tbody>
          </table> 
          <h4>Goods</h4>
          <table class="table">
            <thead>
              <tr>
                <th scope="col">Sr: No</th>
                
                <th scope="col">Name</th>
                <th scope="col">Quantity</th>
                <th scope="col">Amount (in ₹)</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <th scope="row">1</th>
                <td>Sewing machine</td>
                <td>1</td>
                <td>500</td>
              </tr>
              
            </tbody>
          </table> 
          
          <h4>Expense details</h4>
          <table class="table">
            <thead>
              <tr>
                <th scope="col">Sr: No</th>
                
                <th scope="col">Amount (in ₹)</th>

                <th scope="col">Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <th scope="row">1</th>
                <td>500</td>
                <td>sewing machine</td>
              </tr>
              
              <tr>
                <th scope="row">2</th>
                <td>200</td>
                <td>Travel</td>
              </tr>
              
            </tbody>
          </table> 
            </div>
            <div class="col-md-4">
              <img src="https://via.placeholder.com/150" class="img-fluid">
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>

</div>
<script>
    // function addProjectToForm(e)
    // {
    //     console.log(e.parentNode.parentNode);
    //     let p=e.parentNode.parentNode;
    //     let event_name=p.querySelector("td[headers='event_name']").innerHTML;
    //     let start_date=p.querySelector('th[headers="date"]').innerHTML;
    //     let no_of_participants=p.querySelector('td[headers="participants"]').innerHTML;
    //     let budget=p.querySelector('td[headers="budget"]').innerHTML;
    //     let duration=p.querySelector('td[headers="duration"]').innerHTML;
    //     let collection=p.querySelector('td[headers="collection"]').innerHTML;
    //     let expense=p.querySelector('td[headers="expense"]').innerHTML;
    //     console.log(event_name,start_date,no_of_participants,budget,duration,collection,expense);
    //     let form=document.querySelector("form[name='editedDetails']");

    //     form.querySelector("input[name='event_name']").value=event_name;
    //     form.querySelector("input[name='date']").value=start_date;
    //     form.querySelector("input[name='participants']").value=no_of_participants;
    //     form.querySelector("input[name='budget']").value=budget;
    //     form.querySelector("select[name='duration']").value=duration;
    //     form.querySelector("select[name='collection']").value=collection;
    //     form.querySelector("select[name='expense']").value=expense;
    // }


    function edit(e) {
        // console.log("Mahesh");
        let p = e.parentNode.parentNode;
        let event_name = p.querySelector("th[headers='event_name']").innerHTML;
        // console.log(event_name);
        let start_date = p.querySelector("td[headers='date']").innerHTML;
        // console.log(start_date);
        let budget = p.querySelector('td[headers="budget"]').innerHTML;
        // console.log(budget);
        let participants = p.querySelector('td[headers="participants"]').innerHTML;
        // console.log(participants);
        let duration = p.querySelector('td[headers="duration"]').innerHTML;
        // console.log(duration);
        let collection = p.querySelector('td[headers="collection"]').innerHTML;
        // console.log(collection);
        let expense = p.querySelector('td[headers="expense"]').innerHTML;
        // console.log(expense);
        // console.log(phone);
        // console.log("Mahesh");

        let form = document.querySelector("form[name='editedDetails']");

        form.querySelector("input[name='event_name']").value = event_name;
        form.querySelector("input[name='date']").value = start_date;
        form.querySelector("input[name='budget']").value = budget;
        form.querySelector("input[name='participants']").value = participants;
        form.querySelector("input[name='duration']").value = duration;
        form.querySelector("input[name='collection']").value = collection;
        form.querySelector("input[name='expense']").value = expense;
      }

      function delete_user(e) {
        console.log("Mahesh");
        let p = e.parentNode.parentNode;
        let event_name = p.querySelector('th[headers="event_name"]').innerHTML;
        console.log(event_name)
        let start_date = p.querySelector('td[headers="date"]').innerHTML;
        console.log(start_date);
        let form = document.querySelector("form[name='deleteForm']");

        form.querySelector("input[name='event_name']").value = event_name;
        form.querySelector("input[name='date']").value = start_date;
        console.log('all good');
      }



// function postData(e)
// {
//     console.log(e.parentNode)
//     let p=e.parentNode;
//     // let  p=document.getElementById("");
//     let name=p.querySelector("input[name='name']").value;
//     let aadhar=p.querySelector("input[name='aadhar']").value;
//     let dob=p.querySelector("input[name='dob']").value;
//     console.log(name,aadhar,dob)
//     // p.submit();
//     let f= new FormData(p);
//     console.log(f);
//     fetch("http://127.0.0.1:5000/admin/Project", {
//   method: "POST",
//   body: JSON.stringify({
//     "signal": "search",
//     "name":name,
//     "aadhar": aadhar,
//     "dob":dob 


//   }),
//   headers: {
//     "Content-type": "application/json; charset=UTF-8"
//   }
// });
// }
</script>
{% endblock content %}