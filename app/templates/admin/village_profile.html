{% extends 'layout.html'%}
{% block content %}
<div class="container">

  <h1>Village Profile</h1>
  <div class="container" style="width: 65%">
    <form name="searchForm">
      <div class="d-flex flex-wrap m-1 justify-content-between">
        <input type="hidden" name="signal" value="search">


        <!-- Name -->
        <div class="form-group">
          <label for="name">Name</label>
          <input type="text" class="form-control" id="name" name="name">
        </div>


        <!-- Count Variables -->
        <div class="form-group">
          <label for="no_of_ben">No of Beneficiary</label>
          <input type="number" class="form-control" id="no_of_ben" name="noofbeneficiaries">
        </div>

        <div class="form-group">
          <label for="centers">No of Primary Health Centers</label>
          <input type="number" class="form-control" id="centers" name="healthcenters">
        </div>

        <div class="form-group">
          <label for="schools_count">No of Schools</label>
          <input type="number" class="form-control" id="schools_count" name="schoolcount">
        </div>

        <!-- transport text field -->
        <div class="form-group">
          <label for="transport">transport</label>
          <input type="text" class="form-control" id="transport" name="transport">
        </div>



        <!-- major occupation -->
        <div class="form-group">
          <label for="majoroccupation">Major Occupation</label>
          <input type="text" class="form-control" id="majoroccupation" name="occupation">
        </div>



        <div class="form-group">
          <label for="technical_literacy">Technical Literacy</label>
          <input type="text" class="form-control" id="technical_literacy" name="techninal_literacy">
        </div>


        <div class="form-group">
          <label for="year">Year</label>
          <input type="text" class="form-control" id="year" name="year">
        </div>

      </div>


      <div>
        <button type="submit" class="btn btn-primary" onclick="" value="">Search</button>
      </div>
    </form>

  </div>


  <div class="container">
    <button type="button" class="btn btn-success m-2" data-toggle="modal" data-target="#addModal" onclick="">Add New
      Village Profile</button>
  </div>

  <table class="table">
    <thead>
      <tr>
        <th scope="col">Name</th>
        <th scope="col">No of Beneficiaries</th>
        <th scope="col">No of PHCs</th>
        <th scope="col">Major Occupation</th>
        <th scope="col">No of Schools</th>
        <th scope="col">Transport</th>
        <th scope="col">Technical Literacy</th>
        <th scope="col">Year</th>
      </tr>
    </thead>
    <!-- dummy data -->
    <tbody>
      <tr>
        <th scope="row" headers="aadhar">555589892314</th>
        <td headers="name">Mark Sharma</td>
        <td headers="dob">2000-10-10</td>
        <td headers="gender">Male</td>
        <td headers="education">B.Tech</td>
        <td headers="martial">Not Married</td>
        <td headers="employed">No</td>
        <td>
          <button type="button" class="btn btn-primary btn-sm" data-toggle="modal" data-target="#editModal"
            onclick="addUserToForm(this)">Edit</button>
          <button type="button" class="btn btn-danger btn-sm" data-toggle="modal"
            data-target="#deleteModal">Delete</button>
          <button type="button" class="btn btn-success btn-sm" data-toggle="modal" data-target="#profileModal">Show
            Profile</button>
        </td>
      </tr>

    </tbody>
  </table>


  <!-- edit modal  -->
  <div class="modal fade" id="editModal" tabindex="-1" role="dialog" aria-labelledby="editModalLabel"
    aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="editModalLabel">Edit User</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <form name="editedDetails">

            <input type="hidden" value="editUser" name="signal">
            <div class="form-group">
              <label for="name">Name</label>
              <input type="text" class="form-control" id="name" name="name" required>
            </div>


            <div class="form-group">
              <label for="aadhar">Aadhar Id</label>
              <input type="number" class="form-control" id="email" name="aadhar" min="100000000000" max="999999999999"
                required>
            </div>


            <div class="form-group">
              <label for="dob">DOB</label>
              <input type="date" class="form-control" id="dob" name="dob">
            </div>


            <div class="form-group">
              <label for="education">Education</label>
              <input type="text" class="form-control" id="education" name="education">
            </div>

            <div class="form-group">
              <label for="genderSelect">Martial Status</label>
              <select class="form-control" id="genderSelect" name="martial">
                <option value="Married">Married</option>
                <option value="Not Married">Not Married</option>

              </select>
            </div>
            <div class="form-group">
              <label for="genderSelect">Gender</label>
              <select class="form-control" id="genderSelect" name="gender">
                <option value="Male">Male</option>
                <option value="Female">Female</option>
                <option value="other">Other</option>
              </select>
            </div>
            <div class="form-group">
              <label for="genderSelect">Employed</label>
              <select class="form-control" id="genderSelect" name="employed">
                <option value="Yes">Yes</option>
                <option value="No">No</option>

              </select>
            </div>
            <div class="form-group">
              <label for="genderSelect">Enroll in New Event</label>
              <select class="form-control" id="genderSelect" name="new_project">
                <option disabled selected value> -- select an option -- </option>
                <option value="project1">Project 1</option>
                <option value="project2">Project 2</option>

              </select>
            </div>
            <div class="form-group">
              <label for="genderSelect">Village</label>
              <select class="form-control" id="genderSelect" name="village">
                <option value="Basan">Basan</option>
                <option value="Palaj">Palaj</option>

              </select>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
              <input type="submit" class="btn btn-primary" id="saveChangesButton" value="Save Changes">
            </div>
          </form>
        </div>

      </div>
    </div>
  </div>


  <!-- add modal -->

  <div class="modal fade" id="addModal" tabindex="-1" role="dialog" aria-labelledby="editModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="editModalLabel">Add New Beneficiary</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <form name="addDetails">
            <input type="hidden" name="search" value="addUser">

            <div class="form-group">
              <label for="name">Name</label>
              <input type="text" class="form-control" id="name" name="name" required>
            </div>


            <div class="form-group">
              <label for="aadhar">Aadhar Id</label>
              <input type="number" class="form-control" id="email" name="aadhar" min="100000000000" max="999999999999"
                required>
            </div>


            <div class="form-group">
              <label for="dob">DOB</label>
              <input type="date" class="form-control" id="dob" name="dob">
            </div>


            <div class="form-group">
              <label for="education">Education</label>
              <input type="text" class="form-control" id="education" name="education">
            </div>
            <div class="form-group">
              <label for="phone_no">Phone No</label>
              <input type="text" class="form-control" id="education" name="phone_no">
            </div>
            <div class="form-group">
              <label for="genderSelect">Martial Status</label>
              <select class="form-control" id="genderSelect" name="martial">
                <option disabled selected value> -- select an option -- </option>
                <option value="Not Married">Not Married</option>
                <option value="Married">Married</option>

              </select>
            </div>
            <div class="form-group">
              <label for="genderSelect">Gender</label>
              <select class="form-control" id="genderSelect" name="gender">
                <option value="Male">Male</option>
                <option value="Female">Female</option>
                <option value="Other">Other</option>
              </select>
            </div>
            <div class="form-group">
              <label for="genderSelect">Employed</label>
              <select class="form-control" id="genderSelect" name="employed">
                <option disabled selected value> -- select an option -- </option>
                <option value="Yes">Yes</option>
                <option value="No">No</option>

              </select>
            </div>
            <div class="form-group">
              <label for="genderSelect">Enroll in Event</label>
              <select class="form-control" id="genderSelect" name="new_project">
                <option disabled selected value> -- select an option -- </option>
                <option value="project1">Project 1</option>
                <option value="project2">Project 2</option>

              </select>
            </div>
            <div class="form-group">
              <label for="genderSelect">Village</label>
              <select class="form-control" id="genderSelect" name="village">
                <option disabled selected value> -- select an option -- </option>
                <option value="Basan">Basan</option>
                <option value="Palaj">Palaj</option>

              </select>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
              <input type="submit" class="btn btn-primary" id="saveChangesButton" value="Add User">
            </div>

          </form>
        </div>

      </div>
    </div>
  </div>



  <!-- delete modal  -->

  <div class="modal fade" id="deleteModal" tabindex="-1" role="dialog" aria-labelledby="deleteModalLabel"
    aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="deleteModalLabel">Delete User</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          Are you sure you want to delete this beneficiary?
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
          <button type="button" class="btn btn-danger" id="deleteButton">Delete</button>
        </div>
      </div>
    </div>
  </div>

  <!-- profile modal -->

  <div class="modal fade" id="profileModal" tabindex="-1" role="dialog" aria-labelledby="profileModalLabel"
    aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="profileModalLabel">Profile</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">

          <div class="row">

            <div class="col-md-8">
              <h3>Ronaldo</h3>
              <p>Email: example@example.com</p>
              <p>Phone: 1234567890</p>
              <p>Gender: Male</p>
              <p>Martial-Status: Married</p>
              <p>Education: B.Tech</p>
              <p>Employed: Yes</p>
              <p>DOB: 10/10/1998</p>
              <p>Age: 25</p>
              <p>Aadhar: 123456789012</p>
              <div>
                <p>Village Name: Basan</p>
                <p>Pin Code: 190009</p>
              </div>
              <h4>Projects Enrolled</h4>
              <table class="table">
                <thead>
                  <tr>
                    <th scope="col">Sr: No</th>

                    <th scope="col">Event/Project</th>
                    <th scope="col">Start Date</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <th scope="row">1</th>

                    <td>Sewing Workshop</td>
                    <td>2020-10-20</td>
                  </tr>

                </tbody>
              </table>

            </div>
            <div class="col-md-4">
              <img src="https://via.placeholder.com/150" class="img-fluid">
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>

</div>
<script>
  function addUserToForm(e) {

    console.log(e.parentNode.parentNode);
    let p = e.parentNode.parentNode;
    let name = p.querySelector("td[headers='name']").innerHTML;
    let aadhar = p.querySelector('th[headers="aadhar"]').innerHTML;
    let dob = p.querySelector('td[headers="dob"]').innerHTML;
    let education = p.querySelector('td[headers="education"]').innerHTML;
    let martial = p.querySelector('td[headers="martial"]').innerHTML;
    let gender = p.querySelector('td[headers="gender"]').innerHTML;
    let employed = p.querySelector('td[headers="employed"]').innerHTML;
    console.log(name, aadhar, dob, education, martial, gender);
    let form = document.querySelector("form[name='editedDetails']");

    form.querySelector("input[name='name']").value = name;
    form.querySelector("input[name='aadhar']").value = aadhar;
    form.querySelector("input[name='dob']").value = dob;
    form.querySelector("input[name='education']").value = education;
    form.querySelector("select[name='martial']").value = martial;
    form.querySelector("select[name='gender']").value = gender;
    form.querySelector("select[name='employed']").value = employed;
  }

// function postData(e)
// {
//     console.log(e.parentNode)
//     let p=e.parentNode;
//     // let  p=document.getElementById("");
//     let name=p.querySelector("input[name='name']").value;
//     let aadhar=p.querySelector("input[name='aadhar']").value;
//     let dob=p.querySelector("input[name='dob']").value;
//     console.log(name,aadhar,dob)
//     // p.submit();
//     let f= new FormData(p);
//     console.log(f);
//     fetch("http://127.0.0.1:5000/admin/user", {
//   method: "POST",
//   body: JSON.stringify({
//     "signal": "search",
//     "name":name,
//     "aadhar": aadhar,
//     "dob":dob 


//   }),
//   headers: {
//     "Content-type": "application/json; charset=UTF-8"
//   }
// });
// }
</script>
{% endblock content %}