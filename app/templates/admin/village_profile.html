{% extends 'layout.html'%}
{% block content %}
<div class="container">

  <h1>Village Profile</h1>
  <div class="container" style="width: 65%">
    <form name="searchForm">
      <div class="d-flex flex-wrap m-1 justify-content-between">
        <input type="hidden" name="signal" value="search">


        <!-- Name -->
        <div class="form-group">
          <label for="name">Name</label>
          <input type="text" class="form-control" id="name" name="name">
        </div>

        <div class="form-group">
          <label for="pinCode">PIN Code</label>
          <input type="number" class="form-control" id="pinCode" name="pinCode" min="100000" max="999999">
        </div>

        <!-- Count Variables -->
        <div class="form-group">
          <label for="no_of_ben">No of Beneficiary</label>
          <input type="number" class="form-control" id="no_of_ben" name="noOfBeneficiaries">
        </div>

        <div class="form-group">
          <label for="centers">No of Primary Health Centers</label>
          <input type="number" class="form-control" id="centers" name="noOfHealthCenters">
        </div>

        <div class="form-group">
          <label for="schools_count">No of Schools</label>
          <input type="number" class="form-control" id="schools_count" name="noOfSchools">
        </div>

        <!-- transport text field -->
        <div class="form-group">
          <label for="transport">Transport</label>
          <input type="text" class="form-control" id="transport" name="transport">
        </div>



        <!-- major occupation -->
        <div class="form-group">
          <label for="majoroccupation">Major Occupation</label>
          <input type="text" class="form-control" id="majoroccupation" name="occupation">
        </div>



        <div class="form-group">
          <label for="technical_literacy">Technical Literacy</label>
          <input type="text" class="form-control" id="technical_literacy" name="technical_literacy">
        </div>


        <div class="form-group">
          <label for="year">Year</label>
          <input type="number" class="form-control" id="year" name="year" min="2005">
        </div>

        <div class="form-group">
          <label for="beneficiaryAadharId">Beneficiary AadharID:</label>
          <input type="number" class="form-control" id="beneficiaryAadharId" name="beneficiaryAadharId" min="100000000000" max="999999999999">
        </div>
  
        <div class="form-group">
          <label for="beneficiaryName" >Beneficiary Name:</label>
          <input type="text" class="form-control" id="beneficiaryName" name="beneficiaryName">
        </div>



      </div>
      

      <div>
        <button type="submit" class="btn btn-primary" onclick="" value="">Search</button>
      </div>
    </form>

  </div>


  <div class="container">
    <button type="button" class="btn btn-success m-2" data-toggle="modal" data-target="#addModal" onclick="">Add New
      Village Profile</button>
  </div>

  <table class="table">
    <thead>
      <tr>
        <th scope="col">PIN CODE</th>
        <th scope="col">Name</th>
        <th scope="col">No of Beneficiaries</th>
        <th scope="col">No of PHCs</th>
        
        <th scope="col">No of Schools</th>
        <th scope="col">Major Occupation</th>
        <th scope="col">Transport</th>
        <th scope="col">Technical Literacy</th>
        <th scope="col">Year</th>
        <th scope="col">Actions</th>
      </tr>
    </thead>
    <!-- dummy data -->
    <tbody>
      <tr>
        <th scope="row" headers="pinCode">132423</th>
        <td headers="name">Mark Sharma</td>
        <td headers="noOfBeneficiaries">23</td>
        <td headers="noOfHealthCenters">4</td>
        <td headers="noOfSchools">3</td>
        <td headers="occupation">Fishery</td>
        <td headers="transport">Autos</td>
        <td headers="technical_literacy">Class 12 Passout</td>
        <td headers="year">1234</td>

        <td>
          <button type="button" class="btn btn-primary btn-sm" data-toggle="modal" data-target="#editModal"
            onclick="addUserToForm(this)">Edit</button>
          <button type="button" class="btn btn-danger btn-sm" data-toggle="modal"
            data-target="#deleteModal">Delete</button>
          <button type="button" class="btn btn-success btn-sm mt-1" data-toggle="modal" data-target="#profileModal">Show
            Profile</button>
        </td>
      </tr>

    </tbody>
  </table>


  <!-- edit modal  -->
  <div class="modal fade" id="editModal" tabindex="-1" role="dialog" aria-labelledby="editModalLabel"
    aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="editModalLabel">Edit User</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <form name="editedDetails">

            <input type="hidden" value="editUser" name="signal">
            <!-- Name -->
            <div class="form-group">
              <label for="name_edit">Name</label>
              <input type="text" class="form-control" id="name_edit" name="name" required>
            </div>

            <div class="form-group">
              <label for="pinCode_edit">PIN Code</label>
              <input type="number" class="form-control" id="pinCode_edit" name="pinCode" min="100000" max="999999" required>
            </div>

            <!-- Count Variables -->
            <div class="form-group">
              <label for="no_of_ben_edit">No of Beneficiary</label>
              <input type="number" class="form-control" id="no_of_ben_edit" name="noOfBeneficiaries">
            </div>

            <div class="form-group">
              <label for="centers_edit">No of Primary Health Centers</label>
              <input type="number" class="form-control" id="centers_edit" name="noOfHealthCenters">
            </div>

            <div class="form-group">
              <label for="schools_count_edit">No of Schools</label>
              <input type="number" class="form-control" id="schools_count_edit" name="noOfSchools">
            </div>

            <!-- transport text field -->
            <div class="form-group">
              <label for="transport_edit">Transport</label>
              <input type="text" class="form-control" id="transport_edit" name="transport">
            </div>



            <!-- major occupation -->
            <div class="form-group">
              <label for="majoroccupation_edit">Major Occupation</label>
              <input type="text" class="form-control" id="majoroccupation_edit" name="occupation">
            </div>



            <div class="form-group">
              <label for="technical_literacy_edit">Technical Literacy</label>
              <input type="text" class="form-control" id="technical_literacy_edit" name="technical_literacy">
            </div>


            <div class="form-group">
              <label for="year_edit">Year</label>
              <input type="number" class="form-control" id="year_edit" name="year" min="2005">
            </div>

            <div class="form-group">
              <label for="beneficiaryAadharId_edit">Beneficiary AadharID:</label>
              <input type="number" class="form-control" id="beneficiaryAadharId_edit" name="beneficiaryAadharId" min="100000000000" max="999999999999">
            </div>
      
            <div class="form-group">
              <label for="beneficiaryName_edit" >Beneficiary Name:</label>
              <input type="text" class="form-control" id="beneficiaryName_edit" name="beneficiaryName">
            </div>

            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
              <input type="submit" class="btn btn-primary" id="saveChangesButton" value="Save Changes">
            </div>
          </form>
        </div>

      </div>
    </div>
  </div>


  <!-- add modal -->

  <div class="modal fade" id="addModal" tabindex="-1" role="dialog" aria-labelledby="editModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="editModalLabel">Add New Village Profile</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <form name="addDetails">
            <input type="hidden" name="search" value="addUser">

            <!-- Name -->
            <div class="form-group">
              <label for="name_add">Name</label>
              <input type="text" class="form-control" id="name_add" name="name" required>
            </div>

            <div class="form-group">
              <label for="pinCode_add">PIN Code</label>
              <input type="number" class="form-control" id="pinCode_add" name="pinCode" min="100000" max="999999" required>
            </div>

            <!-- Count Variables -->
            <div class="form-group">
              <label for="no_of_ben_add">No of Beneficiary</label>
              <input type="number" class="form-control" id="no_of_ben_add" name="noOfBeneficiaries">
            </div>

            <div class="form-group">
              <label for="centers_add">No of Primary Health Centers</label>
              <input type="number" class="form-control" id="centers_add" name="noOfHealthCenters">
            </div>

            <div class="form-group">
              <label for="schools_count_add">No of Schools</label>
              <input type="number" class="form-control" id="schools_count_add" name="noOfSchools">
            </div>

            <!-- transport text field -->
            <div class="form-group">
              <label for="transport_add">Transport</label>
              <input type="text" class="form-control" id="transport_add" name="transport">
            </div>



            <!-- major occupation -->
            <div class="form-group">
              <label for="majoroccupation_add">Major Occupation</label>
              <input type="text" class="form-control" id="majoroccupation_add" name="occupation">
            </div>



            <div class="form-group">
              <label for="technical_literacy_add">Technical Literacy</label>
              <input type="text" class="form-control" id="technical_literacy_add" name="technical_literacy">
            </div>


            <div class="form-group">
              <label for="year_add">Year</label>
              <input type="number" class="form-control" id="year_add" name="year" min="2005">
            </div>

            <div class="form-group">
              <label for="beneficiaryAadharId_add">Beneficiary AadharID:</label>
              <input type="number" class="form-control" id="beneficiaryAadharId_add" name="beneficiaryAadharId" min="100000000000" max="999999999999">
            </div>
      
            <div class="form-group">
              <label for="beneficiaryName_add" >Beneficiary Name:</label>
              <input type="text" class="form-control" id="beneficiaryName_add" name="beneficiaryName">
            </div>

            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
              <input type="submit" class="btn btn-primary" id="saveChangesButton" value="Add User">
            </div>

          </form>
        </div>

      </div>
    </div>
  </div>



  <!-- delete modal  -->

  <div class="modal fade" id="deleteModal" tabindex="-1" role="dialog" aria-labelledby="deleteModalLabel"
    aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="deleteModalLabel">Delete User</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          Are you sure you want to delete this village profile?
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
          <button type="button" class="btn btn-danger" id="deleteButton">Delete</button>
        </div>
      </div>
    </div>
  </div>

  <!-- profile modal -->

  <div class="modal fade" id="profileModal" tabindex="-1" role="dialog" aria-labelledby="profileModalLabel"
    aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="profileModalLabel">Profile</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">

          <div class="row">

            <div class="col-md-8">
              <h3>Palaj</h3>
              <p>PIN CODE: 382355</p>
              <p>No of Beneficiaries: 23</p>
              <p>No of PHCs: 2</p>
              <p>No of Schools: 3</p>
              <div>
                <p>Major Occupation: Fishery</p>
                <p>Transport: Cycles, Autos</p>
                <p>Technical Literacy: Class 12 passout</p>
              </div>
              <p>Year: 2342</p>
              
              
              <h4>Beneficiaries Present</h4>
              <table class="table">
                <thead>
                  <tr>
                    <th scope="col">Sr: No</th>
                    
                    <th scope="col">Beneficiary Name</th>
                    <th scope="col">Beneficiary Aadhar Id</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <th scope="row">1</th>
                    
                    <td>Kisan Das</td>
                    <td>123042303472</td>
                  </tr>
                  
                </tbody>
              </table>

            </div>
            <!-- <div class="col-md-4">
              <img src="https://via.placeholder.com/150" class="img-fluid">
            </div> -->
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>

</div>
<script>
  function addUserToForm(e) {

    console.log(e.parentNode.parentNode);
    let p = e.parentNode.parentNode;
    let name = p.querySelector("td[headers='name']").innerHTML;
    let pinCode= p.querySelector('th[headers="pinCode"]').innerHTML;
    let noOfBeneficiaries = p.querySelector('td[headers="noOfBeneficiaries"]').innerHTML;
    let noOfHealthCenters = p.querySelector('td[headers="noOfHealthCenters"]').innerHTML;
    let noOfSchools = p.querySelector('td[headers="noOfSchools"]').innerHTML;
    let occupation = p.querySelector('td[headers="occupation"]').innerHTML;
    let transport = p.querySelector('td[headers="transport"]').innerHTML;
    let technical_literacy = p.querySelector('td[headers="technical_literacy"]').innerHTML;
    let year = p.querySelector('td[headers="year"]').innerHTML;
    console.log(name, pinCode, noOfBeneficiaries, noOfHealthCenters, noOfSchools, occupation, transport, technical_literacy, year);
    let form = document.querySelector("form[name='editedDetails']");

    form.querySelector("input[name='name']").value = name;
    form.querySelector("input[name='pinCode']").value = pinCode;
    form.querySelector("input[name='noOfBeneficiaries']").value = noOfBeneficiaries;
    form.querySelector("input[name='noOfHealthCenters']").value = noOfHealthCenters;
    form.querySelector("input[name='noOfSchools']").value = noOfSchools;
    form.querySelector("input[name='occupation']").value = occupation;
    form.querySelector("input[name='transport']").value = transport;
    form.querySelector("input[name='technical_literacy']").value = technical_literacy;
    form.querySelector("input[name='year']").value = year;
  }

// function postData(e)
// {
//     console.log(e.parentNode)
//     let p=e.parentNode;
//     // let  p=document.getElementById("");
//     let name=p.querySelector("input[name='name']").value;
//     let aadhar=p.querySelector("input[name='aadhar']").value;
//     let dob=p.querySelector("input[name='dob']").value;
//     console.log(name,aadhar,dob)
//     // p.submit();
//     let f= new FormData(p);
//     console.log(f);
//     fetch("http://127.0.0.1:5000/admin/user", {
//   method: "POST",
//   body: JSON.stringify({
//     "signal": "search",
//     "name":name,
//     "aadhar": aadhar,
//     "dob":dob 


//   }),
//   headers: {
//     "Content-type": "application/json; charset=UTF-8"
//   }
// });
// }
</script>
{% endblock content %}